<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Orden de Recorrido del Árbol de Análisis Sintáctico</TITLE>
<META NAME="description" CONTENT="Orden de Recorrido del Árbol de Análisis Sintáctico">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node178.html">
<LINK REL="previous" HREF="node176.html">
<LINK REL="up" HREF="node175.html">
<LINK REL="next" HREF="node178.html">
</HEAD>

<BODY >

<A NAME="tex2html4022"
  HREF="node178.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4016"
  HREF="node175.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4010"
  HREF="node176.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4018"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4020"
  HREF="node322.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~pl/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="PL.jpg"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/0910/course/view.php?id=1148"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="hatpl.png"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="pl.ps"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html5"
  HREF="perl_errata_form.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="icon_errata.jpg"
 ALT="errata"></A><A NAME="tex2html6"
  HREF="http://search.cpan.org/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="modulos"></A><A NAME="tex2html7"
  HREF="http://www.perlmonks.org/?node=Seekers of Perl Wisdom"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="monk.gif"
 ALT="perlmonks"></A><A NAME="tex2html8"
  HREF="http://perldoc.perl.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html9"
  HREF="http://nereida.deioc.ull.es/~lhp/perlexamples/"><IMG
  WIDTH="22" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLHP.jpg"
 ALT="apuntes LHP"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.etsii.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="http://nereida.deioc.ull.es/"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="pcgull"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html4023"
  HREF="node178.html">La ambiguedad de las</A>
<B>Sup:</B> <A NAME="tex2html4017"
  HREF="node175.html">RecDescent</A>
<B> Ant:</B> <A NAME="tex2html4011"
  HREF="node176.html">Introducción</A>
 <B>Err:</B> <a href="perl_errata_form.html" target="_blank">Si hallas una errata ...</a>
<BR> <P>

<!--End of Navigation Panel-->

<H1><A NAME="SECTION001120000000000000000">
Orden de Recorrido del Árbol de Análisis Sintáctico</A>
</H1>
RD es un analizador sintáctico descendente recursivo pero no es predictivo.
Cuando estamos en la subrutina asociada con una variable sintáctica, va probando
las reglas una a una hasta encontrar una que tiene éxito. En ese momento la rutina termina
retornando el valor asociado.
Consideremos la siguiente gramática (véase el clásico libro de Aho et al.
[<A
 HREF="node323.html#aho">9</A>], página 182):

<P>
<BR>
<BR>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT">S      <!-- MATH
 $\rightarrow$
 -->
<IMG
 WIDTH="22" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img48.png"
 ALT="$ \rightarrow$">
 cAd</TD>
</TR>
<TR><TD ALIGN="LEFT">A      <!-- MATH
 $\rightarrow$
 -->
<IMG
 WIDTH="22" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img48.png"
 ALT="$ \rightarrow$">
 ab <IMG
 WIDTH="10" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img49.png"
 ALT="$ \vert$">
 a</TD>
</TR>
</TABLE>
</DIV>
<BR>
<BR>

<P>
Claramente la gramática no es LL(1).
Codifiquemos la gramática usando RD:
<PRE>
$ cat -n aho182.pl
 1  #!/usr/bin/perl -w
 2  use strict;
 3  use warnings;
 4
 5  use Parse::RecDescent;
 6
 7  $::RD_TRACE = 1;
 8  $::RD_AUTOACTION =  q{ 1 };
 9  my $grammar = q {
10    S : 'c' A 'd'  { print "Éxito!\n" }
11    A : 'a' 'b'
12      | 'a'
13  };
14
15  my $parser=Parse::RecDescent-&gt;new($grammar);
16  my $input = &lt;&gt;;
17  $parser-&gt;S($input);
</PRE>

<P>
en este ejemplo usamos dos nuevas variables (líneas 7 y 8)
que gobiernan la conducta
de un analizador generado por RD. Las variables <code>$::RD_TRACE</code>
y <code>$::RD_AUTOACTION</code>. La primera hace que el analizador generado
vuelque en <code>stderr</code> un informe del análisis.
La asignación en la línea 8 de una cadena a <code>$::RD_AUTOACTION</code>
hace que todas las producciones con las cuáles no se asocie una acción
explícitamente, tengan como acción asociada la cadena que figura 
en la variable  <code>$::RD_AUTOACTION</code> (en este caso, devolver <code>1</code>).
Así las producciones en las líneas 11 y 12 tienen asociadas la acción
<code>{ 1 }</code>, mientras que la acción asociada con la producción
en la línea 10 es <code>{ print "Éxito!\n" }</code>.

<P>
Obsérvese que, dado que el analizador se ejecuta dentro de 
su propio espacio de nombres, las variables que pertenzcan al 
paquete <code>Main</code> como es el caso de <code>RD_AUTOACTION</code>
deben ser explicitadas prefijándolas con el nombre del 
paquete.

<P>
Veamos el comportamiento del programa con la entrada <code>c a d</code>.
Al ejecutar el programa, lo primero que ocurre, al construir
el objeto analizador en la línea 15 es que RD nos informa de
su interpretación de los diferentes símbolos en la gramática:

<P>
<PRE>
$ ./aho182.pl
    Parse::RecDescent: Treating "S :" as a rule declaration
    Parse::RecDescent: Treating "c" as a literal terminal
    Parse::RecDescent: Treating "A" as a subrule match
    Parse::RecDescent: Treating "d" as a literal terminal
    Parse::RecDescent: Treating "{ print "Éxito!\n" }" as an action
    Parse::RecDescent: Treating "A :" as a rule declaration
    Parse::RecDescent: Treating "a" as a literal terminal
    Parse::RecDescent: Treating "b" as a literal terminal
    Parse::RecDescent: Treating "|" as a new production
    Parse::RecDescent: Treating "a" as a literal terminal
printing code (12078) to RD_TRACE
</PRE>
Ahora se ejecuta la entrada en la línea 16, tecleamos <code>c a d</code>
y sigue una información detallada de la cosntrucción del árbol
sintáctico concreto:
<PRE>
c a d
 1|    S     |Trying rule: [S]                      |
 1|    S     |                                      |"c a d\n"
 1|    S     |Trying production: ['c' A 'd']        |
 1|    S     |Trying terminal: ['c']                |
 1|    S     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[c])                                  |
</PRE>
La salida aparece en cuatro columnas. El número de línea en el texto
de la gramática, la variable sintáctica (que en la jerga RD
se denomina regla o subregla), una descripción verbal de lo
que se está haciendo y por último, la cadena de entrada que queda
por leer. Se acaba de casar <code>c</code> y por tanto se pasa
a llamar al método asociado con <code>A</code>. en la entrada queda 
<code>a d\n</code>:
<PRE>
 1|    S     |                                      |" a d\n"
 1|    S     |Trying subrule: [A]                   |
 2|    A     |Trying rule: [A]                      |
 2|    A     |Trying production: ['a' 'b']          |
 2|    A     |Trying terminal: ['a']                |
 2|    A     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[a])                                  |
 2|    A     |                                      |" d\n"
 2|    A     |Trying terminal: ['b']                |
 2|    A     |&lt;&lt;Didn't match terminal&gt;&gt;             |
</PRE>
RD intenta infructuosamente la primera producción 

<P>
<DIV ALIGN="CENTER">
A <!-- MATH
 $\rightarrow$
 -->
<IMG
 WIDTH="22" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img48.png"
 ALT="$ \rightarrow$">
 a b 

</DIV>

<P>
por tanto va a probar con la segunda producción de A:
<PRE>
 2|    A     |                                      |"d\n"
 2|    A     |Trying production: ['a']              |
 2|    A     |                                      |" a d\n"
 2|    A     |Trying terminal: ['a']                |
 2|    A     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[a])                                  |
 2|    A     |                                      |" d\n"
 2|    A     |Trying action                         |
 2|    A     |&gt;&gt;Matched action&lt;&lt; (return value: [1])|
 2|    A     |&gt;&gt;Matched production: ['a']&lt;&lt;         |
 2|    A     |&gt;&gt;Matched rule&lt;&lt; (return value: [1])  |
 2|    A     |(consumed: [ a])                      |
 1|    S     |&gt;&gt;Matched subrule: [A]&lt;&lt; (return      |
  |          |value: [1]                            |
 1|    S     |Trying terminal: ['d']                |
 1|    S     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[d])                                  |
 1|    S     |                                      |"\n"
 1|    S     |Trying action                         |
Éxito!
 1|    S     |&gt;&gt;Matched action&lt;&lt; (return value: [1])|
 1|    S     |&gt;&gt;Matched production: ['c' A 'd']&lt;&lt;   |
 1|    S     |&gt;&gt;Matched rule&lt;&lt; (return value: [1])  |
 1|    S     |(consumed: [c a d])                   |
</PRE>
De este modo la frase es aceptada. Sin embargo,
¿que ocurriría si invertimos el orden de las producciones 
de <code>A</code> y damos como entrada la cadena <code>c a b d</code>?
Puesto que RD es ocioso, la ahora primera regla <code>A : a</code>
tendrá éxito y el control retornará al método
asociado con <code>S</code>:
<PRE>
$ ./aho182_reverse.pl
c a b d
 1|    S     |Trying rule: [S]                      |
 1|    S     |                                      |"c a b d\n"
 1|    S     |Trying production: ['c' A 'd']        |
 1|    S     |Trying terminal: ['c']                |
 1|    S     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[c])                                  |
 1|    S     |                                      |" a b d\n"
 1|    S     |Trying subrule: [A]                   |
 2|    A     |Trying rule: [A]                      |
 2|    A     |Trying production: ['a']              |
 2|    A     |Trying terminal: ['a']                |
 2|    A     |&gt;&gt;Matched terminal&lt;&lt; (return value:   |
  |          |[a])                                  |
 2|    A     |                                      |" b d\n"
 2|    A     |Trying action                         |
 2|    A     |&gt;&gt;Matched action&lt;&lt; (return value: [1])|
 2|    A     |&gt;&gt;Matched production: ['a']&lt;&lt;         |
 2|    A     |&gt;&gt;Matched rule&lt;&lt; (return value: [1])  |
 2|    A     |(consumed: [ a])                      |
</PRE>
Ahora RD va a rechazar la cadena. No intenta llamar 
de nuevo al método asociado con <code>A</code> para que haga nuevos intentos:
<PRE>
 1|    S     |&gt;&gt;Matched subrule: [A]&lt;&lt; (return      |
  |          |value: [1]                            |
 1|    S     |Trying terminal: ['d']                |
 1|    S     |&lt;&lt;Didn't match terminal&gt;&gt;             |
 1|    S     |                                      |"b d\n"
 1|    S     |&lt;&lt;Didn't match rule&gt;&gt;                 |
</PRE>

<P>
Debes, por tanto, ser cuidadoso con el orden en el que escribes las
producciones. El orden en que las escribas 
tiene una importante incidencia en la conducta del analizador.
<B>En general el analizador generado por RD no acepta el lenguaje
generado por la gramática</B>, en el sentido formal de la expresión 
<A NAME="13555"></A><B>lenguaje generado</B>, tal y como fué definida en la definición
<A HREF="node230.html#definition:lenguajegenerado">8.1.4</A>. En este sentido, hay una separación
semántica similar a la que ocurre en las expresiones regulares. 
El <B>or</B> en las expresiones regulares de Perl también es 
perezoso, a diferencia de la convención adoptada en el estudio teórico de los
lenguajes regulares y los autómatas.

<P>
<P>
<DIV><B>Ejercicio  6.2.1</B> &nbsp; 
<I>Dado el siguiente programa Perl
</I><PRE>
#!/usr/local/bin/perl5.8.0 -w 
use strict;
use warnings;
use Parse::RecDescent;

$::RD_TRACE = 1;
my $grammar = q {

  start:  seq_1 ';'
  seq_1     : 'A' 'B' 'C' 'D'
               { print "seq_1: " . join (" ", @item[1..$#item]) . "\n" }
            |  'A' 'B' 'C' 'D' 'E' 'F'
               { print "seq_1: " . join (" ", @item[1..$#item]) . "\n" }
};

my $parser=Parse::RecDescent-&gt;new($grammar);
my $result = $parser-&gt;start("A B C D E F ;");
if (defined($result)) { 
  print "Valida\n";
} else { print "No reconocida\n"; }
</PRE>
<P>
<I>¿Cuál es la salida?
</I>
<P>
<I>Indica que ocurre si cambiamos el lugar en el que aparece el separador 
punto y coma, poniéndolo en las producciones de <code>seq_1</code>
como sigue:
</I>
<P><PRE>
#!/usr/local/bin/perl5.8.0 -w 
use strict;
use warnings;
use Parse::RecDescent;

$::RD_TRACE = 1;
my $grammar = q {

  start:  seq_1 
  seq_1     : 'A' 'B' 'C' 'D' ';'
               { print "seq_1: " . join (" ", @item[1..$#item]) . "\n" }
            |  'A' 'B' 'C' 'D' 'E' 'F' ';'
               { print "seq_1: " . join (" ", @item[1..$#item]) . "\n" }
};

my $parser=Parse::RecDescent-&gt;new($grammar);

my $result = $parser-&gt;start("A B C D E F ;");
if (defined($result)) { 
  print "Valida\n";
} else { print "No reconocida\n"; }
</PRE>
<P>
<I>¿Podrías resumir en palabras la forma en la que RD explora
el árbol de análisis concreto?
Intenta escribir un seudocódigo que resuma el comportamiento de RD.</I></DIV><P></P>

<P>
<HR>
<A NAME="tex2html4022"
  HREF="node178.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4016"
  HREF="node175.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4010"
  HREF="node176.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4018"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4020"
  HREF="node322.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~pl/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="PL.jpg"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/0910/course/view.php?id=1148"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="hatpl.png"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="pl.ps"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html5"
  HREF="perl_errata_form.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="icon_errata.jpg"
 ALT="errata"></A><A NAME="tex2html6"
  HREF="http://search.cpan.org/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="modulos"></A><A NAME="tex2html7"
  HREF="http://www.perlmonks.org/?node=Seekers of Perl Wisdom"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="monk.gif"
 ALT="perlmonks"></A><A NAME="tex2html8"
  HREF="http://perldoc.perl.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html9"
  HREF="http://nereida.deioc.ull.es/~lhp/perlexamples/"><IMG
  WIDTH="22" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLHP.jpg"
 ALT="apuntes LHP"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.etsii.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="http://nereida.deioc.ull.es/"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="pcgull"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html4023"
  HREF="node178.html">La ambiguedad de las</A>
<B>Sup:</B> <A NAME="tex2html4017"
  HREF="node175.html">RecDescent</A>
<B> Ant:</B> <A NAME="tex2html4011"
  HREF="node176.html">Introducción</A>
 <B>Err:</B> <a href="perl_errata_form.html" target="_blank">Si hallas una errata ...</a>

<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2013-03-05</I>
</ADDRESS>
</BODY>
</HTML>

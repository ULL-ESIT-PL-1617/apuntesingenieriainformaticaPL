<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>El método str en Mas Detalle</TITLE>
<META NAME="description" CONTENT="El método str en Mas Detalle">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node251.html">
<LINK REL="previous" HREF="node249.html">
<LINK REL="up" HREF="node229.html">
<LINK REL="next" HREF="node251.html">
</HEAD>

<BODY >

<A NAME="tex2html5185"
  HREF="node251.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5179"
  HREF="node229.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5173"
  HREF="node249.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5181"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5183"
  HREF="node322.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~pl/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="PL.jpg"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/0910/course/view.php?id=1148"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="hatpl.png"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="pl.ps"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html5"
  HREF="perl_errata_form.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="icon_errata.jpg"
 ALT="errata"></A><A NAME="tex2html6"
  HREF="http://search.cpan.org/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="modulos"></A><A NAME="tex2html7"
  HREF="http://www.perlmonks.org/?node=Seekers of Perl Wisdom"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="monk.gif"
 ALT="perlmonks"></A><A NAME="tex2html8"
  HREF="http://perldoc.perl.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html9"
  HREF="http://nereida.deioc.ull.es/~lhp/perlexamples/"><IMG
  WIDTH="22" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLHP.jpg"
 ALT="apuntes LHP"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.etsii.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="http://nereida.deioc.ull.es/"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="pcgull"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html5186"
  HREF="node251.html">El Método descendant</A>
<B>Sup:</B> <A NAME="tex2html5180"
  HREF="node229.html">Análisis Sintáctico con Parse::Eyapp</A>
<B> Ant:</B> <A NAME="tex2html5174"
  HREF="node249.html">Agrupamiento y Operadores de</A>
 <B>Err:</B> <a href="perl_errata_form.html" target="_blank">Si hallas una errata ...</a>
<BR> <P>

<!--End of Navigation Panel-->

<H1><A NAME="SECTION0013210000000000000000"></A>
<A NAME="section:str"></A>
<BR>
El método <TT>str</TT> en Mas Detalle
</H1>

<H4><A NAME="SECTION0013210010000000000000">
El método <TT>str</TT> de los Nodos</A>
</H4>
  

<P>
Para dar soporte al análisis de los árboles y su representación, <code>Parse::Eyapp</code>
provee el método  str . El siguiente ejemplo con el depurador muestra el uso del método
 str .
El método  Parse::Eyapp::Node::str  retorna
una cadena que describe como término el árbol enraizado en el nodo
que se ha pasado como argumento.

<P>

<H4><A NAME="SECTION0013210020000000000000">
El método <TT>info</TT></A>
</H4>
  

<P>
El método  str  cuando visita un nodo comprueba la existencia de 
un método  info  para la clase del nodo. Si es así el método
será llamado. Obsérvese como en las líneas 5 y 6 proveemos de métodos
<code>info</code> a los nodos <code>TERMINAL</code> y <code>FUNCTION</code>.
La consecuencia es que en la llamada de la línea 7 el término
que describe al árbol es decorado con los nombres de funciones
y los atributos y números de línea de los terminales.

<P>

<H4><A NAME="SECTION0013210030000000000000">
Modo de uso de <TT>str</TT></A>
</H4>
  

<P>
El método <code>str</code> ha sido concebido como una herramienta de
ayuda a la depuración y verificación de los programas árbol.
La metodología consiste en incorporar las pequeñas funciones
<code>info</code> al programa en el que trabajamos. 
Por ejemplo:

<P>
<PRE>
640  sub Run {
641   my($self)=shift;
...   ................
663  }
664
665  sub TERMINAL::info {
666    my @a = join ':', @{$_[0]-&gt;{attr}};
667    return "[@a]"
668  }
669
670  sub FUNCTION::info {
671    return "[".$_[0]-&gt;{function_name}[0]."]"
672  }
673
674  sub BLOCK::info {
675    return "[".$_[0]-&gt;{line}."]"
676  }
</PRE>

<P>

<H4><A NAME="SECTION0013210040000000000000">
Variables que Gobiernan la Conducta de <TT>str</TT></A>
</H4>
  

<P>
Las variables de paquete que gobiernan la conducta
de <code>str</code> y sus valores por defecto aparecen en la siguiente lista:

<P>

<UL>
<LI><code>our @PREFIXES = qw(Parse::Eyapp::Node::)</code>

<P>
La variable de paquete  Parse::Eyapp::Node::PREFIXES  contiene
la lista de prefijos de los nombres de tipo que serán eliminados
cuando <code>str</code> muestra el término. Por defecto contiene 
la cadena <code>'Parse::Eyapp::Node::'</code>. 

<P>
</LI>
<LI><code>our $INDENT = 0</code>
La variable  $Parse::Eyapp::Node::INDENT  controla el formato de presentación
usado por  Parse::Eyapp::Node::str :

<OL>
<LI>Si es <code>0</code> la representación es compacta.
</LI>
<LI>Si es 1 se usará un sangrado razonable. 
</LI>
<LI>Si es 2 cada paréntesis cerrar que este a una distancia 
mayor de  $Parse::Eyapp::Node::LINESEP  líneas será comentado con el tipo del nodo. 
Por defecto la variable <code>$Parse::Eyapp::Node::LINESEP</code> está a 4.
Véase la página 
<A HREF="node290.html#code:indent2"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A>
para un ejemplo con <code>$INDENT</code> a 2 y 
<code>$Parse::Eyapp::Node::LINESEP</code> a 4.
</LI>
</OL>

<P>
</LI>
<LI><code>our $STRSEP = ','</code>

<P>
Separador de nodos en un término. Por defecto es la coma.

<P>
</LI>
<LI><code>our $DELIMITER = '['</code>

<P>
Delimitador de presentación de la información proveída por el método
<code>info</code>. Por defecto los delimitadores son corchetes. Puede elegirse 
uno cualquiera de  la lista:
<PRE>
                    '[', '{', '(', '&lt;'
</PRE>
si se define como la cadena vacía o <code>undef</code> no se usarán delimitadores.

<P>
</LI>
<LI><code>our $FOOTNOTE_HEADER = "\n---------------------------\n"</code>

<P>
Delimitador para las notas a pie de página.

<P>
</LI>
<LI><code>our $FOOTNOTE_SEP = ")\n"</code>
Separador de la etiqueta/número de la nota al pie

<P>
</LI>
<LI><code>our $FOOTNOTE_LEFT = '^{'</code>, <code>our $FOOTNOTE_RIGHT = '}'</code>

<P>
Definen el texto que rodea al número de referencia en el nodo.

<P>
</LI>
</UL>

<P>

<H4><A NAME="SECTION0013210050000000000000">
Notas a Pié de Página o Footnotes</A>
</H4>
  

<P>
El siguiente ejemplo ilustra el manejo de <B>notas a pié de árbol</B>
usando  str . Se han definido los siguientes métodos:
<PRE>
nereida:~/doc/casiano/PLBOOK/PLBOOK/code&gt; sed -ne '677,$p' Simple6.eyp
$Parse::Eyapp::Node::INDENT = 1;
sub TERMINAL::info {
  my @a = join ':', @{$_[0]-&gt;{attr}};
  return "@a"
}

sub PROGRAM::footnote {
  return "Types:\n"
         .Dumper($_[0]-&gt;{types}).
         "Symbol Table:\n"
         .Dumper($_[0]-&gt;{symboltable})
}

sub FUNCTION::info {
  return $_[0]-&gt;{function_name}[0]
}

sub FUNCTION::footnote {
  return Dumper($_[0]-&gt;{symboltable})
}

sub BLOCK::info {
  return $_[0]-&gt;{line}
}

sub VAR::info {
  return $_[0]-&gt;{definition}{type} if defined $_[0]-&gt;{definition}{type};
  return "No declarado!";
}

*FUNCTIONCALL::info = *VARARRAY::info = \&amp;VAR::info;
</PRE>
El resultado para el programa de entrada:
<PRE>
nereida:~/doc/casiano/PLBOOK/PLBOOK/code&gt; cat salida
int a,b;

int f(char c) {
 a[2] = 4;
 b[1][3] = a + b;
 c = c[5] * 2;
 return g(c);
}
</PRE>
produce una salida por <code>stderr</code>:
<PRE>
Identifier g not declared
</PRE>
y la siguiente descripción de la estructura de datos:
<PRE>
PROGRAM^{0}(
  FUNCTION{f}^{1}(
    ASSIGN(
      VARARRAY{INT}(
        TERMINAL{a:4},
        INDEXSPEC(
          INUM(
            TERMINAL{2:4}
          )
        )
      ),
      INUM(
        TERMINAL{4:4}
      )
    ),
    ASSIGN(
      VARARRAY{INT}(
        TERMINAL{b:5},
        INDEXSPEC(
          INUM(
            TERMINAL{1:5}
          ),
          INUM(
            TERMINAL{3:5}
          )
        )
      ),
      PLUS(
        VAR{INT}(
          TERMINAL{a:5}
        ),
        VAR{INT}(
          TERMINAL{b:5}
        )
      )
    ),
    ASSIGN(
      VAR{CHAR}(
        TERMINAL{c:6}
      ),
      TIMES(
        VARARRAY{CHAR}(
          TERMINAL{c:6},
          INDEXSPEC(
            INUM(
              TERMINAL{5:6}
            )
          )
        ),
        INUM(
          TERMINAL{2:6}
        )
      )
    ),
    RETURN(
      FUNCTIONCALL{No declarado!}(
        TERMINAL{g:7},
        ARGLIST(
          VAR{CHAR}(
            TERMINAL{c:7}
          )
        )
      )
    )
  )
)
---------------------------
0)
Types:
$VAR1 = {
  'F(X_1(CHAR),INT)' =&gt; bless( {
    'children' =&gt; [
      bless( {
        'children' =&gt; [
          bless( {
            'children' =&gt; []
          }, 'CHAR' )
        ]
      }, 'X_1' ),
      bless( {
        'children' =&gt; []
      }, 'INT' )
    ]
  }, 'F' ),
  'CHAR' =&gt; bless( {
    'children' =&gt; []
  }, 'CHAR' ),
  'INT' =&gt; bless( {
    'children' =&gt; []
  }, 'INT' )
};
Symbol Table:
$VAR1 = {
  'a' =&gt; {
    'type' =&gt; 'INT',
    'line' =&gt; 1
  },
  'b' =&gt; {
    'type' =&gt; 'INT',
    'line' =&gt; 1
  },
  'f' =&gt; {
    'type' =&gt; 'F(X_1(CHAR),INT)',
    'line' =&gt; 3
  }
};

---------------------------
1)
$VAR1 = {
  'c' =&gt; {
    'type' =&gt; 'CHAR',
    'param' =&gt; 1,
    'line' =&gt; 3
  }
};
</PRE>

<P>

<H4><A NAME="SECTION0013210060000000000000">
Usando <TT>str</TT> sobre una Lista de Áboles</A>
</H4>
  

<P>
Para usar <code>str</code> sobre una lista de árboles la llamada deberá hacerse
como método de clase, i.e. con el nombre de la clase como prefijo y no
con el objeto:

<P>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT" VALIGN="TOP" WIDTH=170><code>Parse::Eyapp::Node-&gt;str(@forest)</code></TD>
</TR>
</TABLE>
</DIV>

<P>
cuando quiera 
convertir a su representación término mas de un árbol.
El código:

<P>
<A NAME="code:indent2"></A><PRE>
nereida:~/doc/casiano/PLBOOK/PLBOOK/code&gt; sed -ne '652,658p' Simple4.eyp \
                                          | cat -n
     1       local $Parse::Eyapp::Node::INDENT = 2;
     2       local $Parse::Eyapp::Node::DELIMITER = "";
     3       print $t-&gt;str."\n";
     4       {
     5         local $" = "\n";
     6         print Parse::Eyapp::Node-&gt;str(@blocks)."\n";
     7       }
</PRE>

<P>
produce la salida:

<P>
<PRE>
nereida:~/doc/casiano/PLBOOK/PLBOOK/code&gt; eyapp Simple4 ;\
                                          treereg SimpleTrans.trg ;\
                                          usesimple4.pl
****************
f() {
  int a,b[1][2],c[1][2][3];
  char d[10];
  b[0][1] = a;
}

PROGRAM(
  FUNCTION[f](
    ASSIGN(
      VARARRAY(
        TERMINAL[b:4],
        INDEXSPEC(
          INUM(
            TERMINAL[0:4]
          ),
          INUM(
            TERMINAL[1:4]
          )
        ) # INDEXSPEC
      ) # VARARRAY,
      VAR(
        TERMINAL[a:4]
      )
    ) # ASSIGN
  ) # FUNCTION
) # PROGRAM

Match[PROGRAM:0:blocks](
  Match[FUNCTION:1:blocks:[f]]
)
</PRE>

<P>
Obsérvense los comentarios <code># TIPODENODO</code> que acompañan a los paréntesis
cerrar cuando estos están lejos (esto es, a una distancia de mas de
 $Parse::Eyapp::Node::LINESEP  líneas) del correspondiente paréntesis abrir.
Tales comentarios son consecuencia de haber establecido el valor de 
 $Parse::Eyapp::Node::INDENT  a 2.

<P>
<BR> <HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL>
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html5187"
  HREF="node250.html#SECTION0013210010000000000000">El método <TT>str</TT> de los Nodos</A>
<LI><A NAME="tex2html5188"
  HREF="node250.html#SECTION0013210020000000000000">El método <TT>info</TT></A>
<LI><A NAME="tex2html5189"
  HREF="node250.html#SECTION0013210030000000000000">Modo de uso de <TT>str</TT></A>
<LI><A NAME="tex2html5190"
  HREF="node250.html#SECTION0013210040000000000000">Variables que Gobiernan la Conducta de <TT>str</TT></A>
<LI><A NAME="tex2html5191"
  HREF="node250.html#SECTION0013210050000000000000">Notas a Pié de Página o Footnotes</A>
<LI><A NAME="tex2html5192"
  HREF="node250.html#SECTION0013210060000000000000">Usando <TT>str</TT> sobre una Lista de Áboles</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->
<HR>
<A NAME="tex2html5185"
  HREF="node251.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5179"
  HREF="node229.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5173"
  HREF="node249.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5181"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5183"
  HREF="node322.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html2"
  HREF="http://nereida.deioc.ull.es/~pl/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="PL.jpg"
 ALT="PL"></A><A NAME="tex2html3"
  HREF="http://campusvirtual.ull.es/0910/course/view.php?id=1148"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="hatpl.png"
 ALT="PL moodle"></A><A NAME="tex2html4"
  HREF="pl.ps"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="ps"></A><A NAME="tex2html5"
  HREF="perl_errata_form.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="icon_errata.jpg"
 ALT="errata"></A><A NAME="tex2html6"
  HREF="http://search.cpan.org/"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="modulos"></A><A NAME="tex2html7"
  HREF="http://www.perlmonks.org/?node=Seekers of Perl Wisdom"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="monk.gif"
 ALT="perlmonks"></A><A NAME="tex2html8"
  HREF="http://perldoc.perl.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html9"
  HREF="http://nereida.deioc.ull.es/~lhp/perlexamples/"><IMG
  WIDTH="22" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLHP.jpg"
 ALT="apuntes LHP"></A><A NAME="tex2html10"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html11"
  HREF="http://www.etsii.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html12"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html13"
  HREF="http://nereida.deioc.ull.es/"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="pcgull"></A>
<BR>
<B> Sig:</B> <A NAME="tex2html5186"
  HREF="node251.html">El Método descendant</A>
<B>Sup:</B> <A NAME="tex2html5180"
  HREF="node229.html">Análisis Sintáctico con Parse::Eyapp</A>
<B> Ant:</B> <A NAME="tex2html5174"
  HREF="node249.html">Agrupamiento y Operadores de</A>
 <B>Err:</B> <a href="perl_errata_form.html" target="_blank">Si hallas una errata ...</a>

<!--End of Navigation Panel-->
<ADDRESS>
<I>Casiano Rodríguez León <BR>
2013-03-05</I>
</ADDRESS>
</BODY>
</HTML>
